<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Campionato Bocce 2°/3° Categoria, Juniores e Femminile</title>
<style>
body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: linear-gradient(to bottom, #e0f7fa, #fffde7); color: #333; }
header { background: #0288d1; color: white; text-align: center; padding: 20px 10px; }
h1 { margin: 0; font-size: 1.8em; }
section { padding: 20px; max-width: 1000px; margin: auto; }
h2 { color: #0277bd; margin-top: 40px; }
.team, .match { background: #ffffffdd; margin: 10px 0; padding: 15px; border-radius: 10px; box-shadow: 0 3px 6px rgba(0,0,0,0.1); transition: transform 0.3s; }
.team:hover, .match:hover { transform: translateY(-3px); }
.team img { max-width: 150px; display: block; margin-bottom: 10px; border-radius: 10px; }
.members { font-style: italic; }
.match-date { font-weight: bold; color: #0288d1; }
</style>
</head>
<body>

<header>
  <h1>Campionato Bocce 2°/3° Categoria, Juniores e Femminile</h1>
</header>

<section id="teams-section">
  <h2>Squadre</h2>
  <!-- Squadre verranno inserite qui da JS -->
</section>

<section id="matches-section">
  <h2>Calendario Gare</h2>
  <!-- Gare verranno inserite qui da JS -->
</section>

<script>
// === Funzioni lettura dati da localStorage ===
function getTeamsData(){
  const data = localStorage.getItem("teamsData");
  return data ? JSON.parse(data) : { "2° Categoria": [], "3° Categoria": [], juniores: [], femminile: [] };
}

// === Ordina membri alfabeticamente ===
function sortMembers(membersStr){
  return membersStr.split(",").map(m=>m.trim()).sort().join(", ");
}

// === Mostra squadre ===
function displayTeams(){
  const container = document.getElementById("teams-section");
  container.innerHTML = "<h2>Squadre</h2>"; // reset
  const data = getTeamsData();

  const categories = ["2° Categoria", "3° Categoria", "juniores", "femminile"];
  categories.forEach(cat=>{
    if(data[cat] && data[cat].length > 0){
      data[cat].forEach(team=>{
        const div = document.createElement("div");
        div.className = "team";
        div.innerHTML = `
          <h3>${team.name}</h3>
          ${team.photo ? `<img src="${team.photo}" alt="${team.name}">` : ""}
          <div class="members">Componenti: ${sortMembers(team.members)}</div>
        `;
        container.appendChild(div);
      });
    }
  });
}

// === Mostra calendario gare ===
function displayMatches(){
  const container = document.getElementById("matches-section");
  container.innerHTML = "<h2>Calendario Gare</h2>"; // reset
  const data = getTeamsData();
  const categories = ["2° Categoria", "3° Categoria", "juniores", "femminile"];
  categories.forEach(cat=>{
    if(data[cat] && data[cat].length > 0){
      data[cat].forEach(team=>{
        if(team.matches && team.matches.length > 0){
          team.matches.sort((a,b)=>a.date.localeCompare(b.date));
          team.matches.forEach(match=>{
            const div = document.createElement("div");
            div.className = "match";
            div.innerHTML = `
              <h4>${team.name}</h4>
              <div class="match-date">${match.date}</div>
              <div>Avversario: ${match.opponent}</div>
              <div>Luogo: ${match.location}</div>
            `;
            container.appendChild(div);
          });
        }
      });
    }
  });
}

// === Inizializza pagina ===
displayTeams();
displayMatches();
</script>

</body>
</html>